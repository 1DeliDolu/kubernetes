# Adding Linux worker nodes


## ğŸš€ Adding Linux worker nodes / HinzufÃ¼gen von Linux-Worker-Knoten


**Deutsche Ãœbersetzung:**  
Diese Seite erklÃ¤rt, wie man Linux-Worker-Knoten zu einem mit **kubeadm** erstellten Cluster hinzufÃ¼gt.

---

## ğŸ§© Before you begin / Bevor Sie beginnen

Jeder beitretende Worker-Knoten muss die erforderlichen Komponenten aus der Anleitung **Installing kubeadm** installiert haben, also insbesondere `kubeadm`, den `kubelet` und eine Container-Laufzeitumgebung.  
AuÃŸerdem benÃ¶tigen Sie einen laufenden **kubeadm-Cluster**, der mit `kubeadm init` erstellt wurde und den Schritten aus dem Dokument **Creating a cluster with kubeadm** folgt.  
Superuser-Zugriff (Root-Rechte) auf den Knoten ist erforderlich.

---

## ğŸ§© Adding Linux worker nodes / HinzufÃ¼gen von Linux-Worker-Knoten

Um neue Linux-Worker-Knoten zu Ihrem Cluster hinzuzufÃ¼gen, fÃ¼hren Sie die folgenden Schritte auf jeder Maschine aus:

1. Verbinden Sie sich mit der Maschine Ã¼ber SSH oder eine andere Methode.  
2. FÃ¼hren Sie den Befehl aus, der durch `kubeadm init` ausgegeben wurde. Beispiel:
   ```bash
   sudo kubeadm join --token <token> <control-plane-host>:<control-plane-port> --discovery-token-ca-cert-hash sha256:<hash>
````

---

## ğŸ§© Additional information for kubeadm join / ZusÃ¤tzliche Informationen zu `kubeadm join`

> **Hinweis:**
> Wenn Sie eine IPv6-Adresse fÃ¼r `<control-plane-host>:<control-plane-port>` angeben, muss die IPv6-Adresse in eckige Klammern gesetzt werden, z. B.:
> `[2001:db8::101]:2073`.

Wenn Sie den Token nicht mehr haben, kÃ¶nnen Sie ihn auf dem **Control-Plane-Knoten** mit folgendem Befehl abrufen:

```bash
# Auf einem Control-Plane-Knoten ausfÃ¼hren
sudo kubeadm token list
```

Die Ausgabe sieht in etwa so aus:

```
TOKEN                    TTL  EXPIRES              USAGES           DESCRIPTION            EXTRA GROUPS
8ewj1p.9r9hcjoqgajrj4gi  23h  2018-06-12T02:51:28Z authentication,  The default bootstrap  system:
                                                   signing          token generated by     bootstrappers:
                                                                    'kubeadm init'.        kubeadm:
                                                                                           default-node-token
```

StandardmÃ¤ÃŸig laufen Join-Tokens nach **24 Stunden** ab.
Wenn Sie einen neuen Knoten nach Ablauf des Tokens zum Cluster hinzufÃ¼gen mÃ¶chten, kÃ¶nnen Sie auf dem Control-Plane-Knoten ein neues Token erstellen:

```bash
# Auf einem Control-Plane-Knoten ausfÃ¼hren
sudo kubeadm token create
```

Beispielausgabe:

```
5didvk.d09sbcov8ph2amjw
```

Um gleichzeitig ein neues Token zu generieren **und** den vollstÃ¤ndigen Join-Befehl auszugeben, verwenden Sie:

```bash
sudo kubeadm token create --print-join-command
```

Wenn Sie den Wert fÃ¼r `--discovery-token-ca-cert-hash` nicht kennen, kÃ¶nnen Sie ihn mit folgendem Befehl auf dem Control-Plane-Knoten ermitteln:

```bash
# Auf einem Control-Plane-Knoten ausfÃ¼hren
sudo cat /etc/kubernetes/pki/ca.crt | openssl x509 -pubkey  | openssl rsa -pubin -outform der 2>/dev/null | \
   openssl dgst -sha256 -hex | sed 's/^.* //'
```

Beispielausgabe:

```
8cb2de97839780a412b93877f8507ad6c94f73add17d5d7058e91741c9d5ec78
```

---

## ğŸ§© Example output / Beispielausgabe

Die Ausgabe von `kubeadm join` sollte in etwa wie folgt aussehen:

```
[preflight] Running pre-flight checks

... (log output of join workflow) ...

Node join complete:
* Certificate signing request sent to control-plane and response
  received.
* Kubelet informed of new secure connection details.
```

FÃ¼hren Sie auf der **Control Plane** den folgenden Befehl aus, um den neuen Knoten zu Ã¼berprÃ¼fen:

```bash
kubectl get nodes
```

Nach einigen Sekunden sollte der neue Knoten in der Ausgabe erscheinen.

---

## ğŸ§© Note on CoreDNS / Hinweis zu CoreDNS

> **Hinweis:**
> Da die Cluster-Knoten Ã¼blicherweise nacheinander initialisiert werden, laufen die **CoreDNS-Pods** wahrscheinlich alle auf dem ersten Control-Plane-Knoten.
> Um eine hÃ¶here VerfÃ¼gbarkeit zu erreichen, sollten Sie die CoreDNS-Pods neu verteilen, sobald mindestens ein neuer Knoten beigetreten ist:
>
> ```bash
> kubectl -n kube-system rollout restart deployment coredns
````markdown
## ğŸš€ Adding Linux worker nodes / HinzufÃ¼gen von Linux-Worker-Knoten


**Deutsche Ãœbersetzung:**  
Diese Seite erklÃ¤rt, wie man Linux-Worker-Knoten zu einem mit **kubeadm** erstellten Cluster hinzufÃ¼gt.

---

## ğŸ§© Before you begin / Bevor Sie beginnen

Jeder beitretende Worker-Knoten muss die erforderlichen Komponenten aus der Anleitung **Installing kubeadm** installiert haben, also insbesondere `kubeadm`, den `kubelet` und eine Container-Laufzeitumgebung.  
AuÃŸerdem benÃ¶tigen Sie einen laufenden **kubeadm-Cluster**, der mit `kubeadm init` erstellt wurde und den Schritten aus dem Dokument **Creating a cluster with kubeadm** folgt.  
Superuser-Zugriff (Root-Rechte) auf den Knoten ist erforderlich.

---

## ğŸ§© Adding Linux worker nodes / HinzufÃ¼gen von Linux-Worker-Knoten

Um neue Linux-Worker-Knoten zu Ihrem Cluster hinzuzufÃ¼gen, fÃ¼hren Sie die folgenden Schritte auf jeder Maschine aus:

1. Verbinden Sie sich mit der Maschine Ã¼ber SSH oder eine andere Methode.  
2. FÃ¼hren Sie den Befehl aus, der durch `kubeadm init` ausgegeben wurde. Beispiel:
   ```bash
   sudo kubeadm join --token <token> <control-plane-host>:<control-plane-port> --discovery-token-ca-cert-hash sha256:<hash>
````

---

## ğŸ§© Additional information for kubeadm join / ZusÃ¤tzliche Informationen zu `kubeadm join`

> **Hinweis:**
> Wenn Sie eine IPv6-Adresse fÃ¼r `<control-plane-host>:<control-plane-port>` angeben, muss die IPv6-Adresse in eckige Klammern gesetzt werden, z. B.:
> `[2001:db8::101]:2073`.

Wenn Sie den Token nicht mehr haben, kÃ¶nnen Sie ihn auf dem **Control-Plane-Knoten** mit folgendem Befehl abrufen:

```bash
# Auf einem Control-Plane-Knoten ausfÃ¼hren
sudo kubeadm token list
```

Die Ausgabe sieht in etwa so aus:

```
TOKEN                    TTL  EXPIRES              USAGES           DESCRIPTION            EXTRA GROUPS
8ewj1p.9r9hcjoqgajrj4gi  23h  2018-06-12T02:51:28Z authentication,  The default bootstrap  system:
                                                   signing          token generated by     bootstrappers:
                                                                    'kubeadm init'.        kubeadm:
                                                                                           default-node-token
```

StandardmÃ¤ÃŸig laufen Join-Tokens nach **24 Stunden** ab.
Wenn Sie einen neuen Knoten nach Ablauf des Tokens zum Cluster hinzufÃ¼gen mÃ¶chten, kÃ¶nnen Sie auf dem Control-Plane-Knoten ein neues Token erstellen:

```bash
# Auf einem Control-Plane-Knoten ausfÃ¼hren
sudo kubeadm token create
```

Beispielausgabe:

```
5didvk.d09sbcov8ph2amjw
```

Um gleichzeitig ein neues Token zu generieren **und** den vollstÃ¤ndigen Join-Befehl auszugeben, verwenden Sie:

```bash
sudo kubeadm token create --print-join-command
```

Wenn Sie den Wert fÃ¼r `--discovery-token-ca-cert-hash` nicht kennen, kÃ¶nnen Sie ihn mit folgendem Befehl auf dem Control-Plane-Knoten ermitteln:

```bash
# Auf einem Control-Plane-Knoten ausfÃ¼hren
sudo cat /etc/kubernetes/pki/ca.crt | openssl x509 -pubkey  | openssl rsa -pubin -outform der 2>/dev/null | \
   openssl dgst -sha256 -hex | sed 's/^.* //'
```

Beispielausgabe:

```
8cb2de97839780a412b93877f8507ad6c94f73add17d5d7058e91741c9d5ec78
```

---

## ğŸ§© Example output / Beispielausgabe

Die Ausgabe von `kubeadm join` sollte in etwa wie folgt aussehen:

```
[preflight] Running pre-flight checks

... (log output of join workflow) ...

Node join complete:
* Certificate signing request sent to control-plane and response
  received.
* Kubelet informed of new secure connection details.
```

FÃ¼hren Sie auf der **Control Plane** den folgenden Befehl aus, um den neuen Knoten zu Ã¼berprÃ¼fen:

```bash
kubectl get nodes
```

Nach einigen Sekunden sollte der neue Knoten in der Ausgabe erscheinen.

---

## ğŸ§© Note on CoreDNS / Hinweis zu CoreDNS

> **Hinweis:**
> Da die Cluster-Knoten Ã¼blicherweise nacheinander initialisiert werden, laufen die **CoreDNS-Pods** wahrscheinlich alle auf dem ersten Control-Plane-Knoten.
> Um eine hÃ¶here VerfÃ¼gbarkeit zu erreichen, sollten Sie die CoreDNS-Pods neu verteilen, sobald mindestens ein neuer Knoten beigetreten ist:
>
> ```bash
> kubectl -n kube-system rollout restart deployment coredns
> ```





